{"version":3,"file":"commonHelpers.js","sources":["../src/Pixabay.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nconst defaultParams = {\n  key: '44571009-8d5b9c16825d4f8c021db4d6b',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: 'cat',\n};\n\nexport const getPhotos = async params => {\n  try {\n    const result = await axios.get('/', {\n      params: { ...defaultParams, ...params },\n    });\n    return result.data;\n  } catch (e) {\n    console.log(e);\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPhotos } from './Pixabay';\n\nconst gallery = document.querySelector('#gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst noMore = document.querySelector('.no-more');\n\nconst searchParams = {\n  q: 'kiev',\n  page: 1,\n  per_page: 40,\n};\n\nconst lightbox = new SimpleLightbox('#gallery a');\n\nconst drawResults = photos => {\n  gallery.innerHTML += photos.hits\n    .map(\n      photo => `<div class=\"photo-card\">\n            <a href=\"${photo.largeImageURL}\" target=\"_blank\">\n                <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes</b>${photo.likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views</b>${photo.views}\n              </p>\n              <p class=\"info-item\">\n                <b>Comments</b>${photo.comments}\n              </p>\n              <p class=\"info-item\">\n                <b>Downloads</b>${photo.downloads}\n              </p>\n            </div>\n          </div>`\n    )\n    .join('');\n    lightbox.refresh();\n  checkLoadMoreBtn(photos.totalHits);\n};\n\nconst checkLoadMoreBtn = async totalHits => {\n  const { page, per_page } = searchParams;\n  if (page * per_page < totalHits) {\n    loadMoreBtn.style.display = 'flex';\n    noMore.style.display = 'none';\n  } else {\n    loadMoreBtn.style.display = 'none';\n    noMore.style.display = 'flex';\n  }\n};\n\nconst handleSubmit = async e => {\n  e.preventDefault();\n  const query = e.target.elements.searchQuery.value;\n  if (query) {\n    searchParams.q = query;\n  }\n\n  searchParams.page = 1;\n\n  const photos = await getPhotos(searchParams);\n\n  if (photos.totalHits === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n      position: 'topRight',\n    });\n    return;\n  } else {\n    iziToast.success({\n      message: `Hooray! We found ${photos.totalHits} images.`,\n      position: 'topRight',\n    });\n  }\n\n  gallery.innerHTML = '';\n  drawResults(photos);\n};\n\nconst handleLoadMore = async () => {\n  searchParams.page += 1;\n  const photos = await getPhotos(searchParams);\n  drawResults(photos);\n\n  const { height: cardHeight } = gallery\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n"],"names":["axios","defaultParams","getPhotos","params","gallery","searchForm","loadMoreBtn","noMore","searchParams","lightbox","SimpleLightbox","drawResults","photos","photo","checkLoadMoreBtn","totalHits","page","per_page","handleSubmit","e","query","iziToast","handleLoadMore","cardHeight"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,0BAEzB,MAAMC,EAAgB,CACpB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAG,KACL,EAEaC,EAAY,MAAMC,GAAU,CACvC,GAAI,CAIF,OAHe,MAAMH,EAAM,IAAI,IAAK,CAClC,OAAQ,CAAE,GAAGC,EAAe,GAAGE,CAAQ,CAC7C,CAAK,GACa,IACf,OAAQ,EAAG,CACV,QAAQ,IAAI,CAAC,CACd,CACH,ECfMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,UAAU,EAE1CC,EAAe,CACnB,EAAG,OACH,KAAM,EACN,SAAU,EACZ,EAEMC,EAAW,IAAIC,EAAe,YAAY,EAE1CC,EAAcC,GAAU,CAC5BR,EAAQ,WAAaQ,EAAO,KACzB,IACCC,GAAS;AAAA,uBACQA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,8BAIpCA,EAAM,KAAK;AAAA;AAAA;AAAA,8BAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,iCAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,kCAGbA,EAAM,SAAS;AAAA;AAAA;AAAA,iBAI5C,EACA,KAAK,EAAE,EACRJ,EAAS,QAAO,EAClBK,EAAiBF,EAAO,SAAS,CACnC,EAEME,EAAmB,MAAMC,GAAa,CAC1C,KAAM,CAAE,KAAAC,EAAM,SAAAC,CAAU,EAAGT,EACvBQ,EAAOC,EAAWF,GACpBT,EAAY,MAAM,QAAU,OAC5BC,EAAO,MAAM,QAAU,SAEvBD,EAAY,MAAM,QAAU,OAC5BC,EAAO,MAAM,QAAU,OAE3B,EAEMW,EAAe,MAAMC,GAAK,CAC9BA,EAAE,eAAc,EAChB,MAAMC,EAAQD,EAAE,OAAO,SAAS,YAAY,MACxCC,IACFZ,EAAa,EAAIY,GAGnBZ,EAAa,KAAO,EAEpB,MAAMI,EAAS,MAAMV,EAAUM,CAAY,EAE3C,GAAII,EAAO,YAAc,EAAG,CAC1BS,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAChB,CAAK,EACD,MACJ,MACIA,EAAS,QAAQ,CACf,QAAS,oBAAoBT,EAAO,SAAS,WAC7C,SAAU,UAChB,CAAK,EAGHR,EAAQ,UAAY,GACpBO,EAAYC,CAAM,CACpB,EAEMU,EAAiB,SAAY,CACjCd,EAAa,MAAQ,EACrB,MAAMI,EAAS,MAAMV,EAAUM,CAAY,EAC3CG,EAAYC,CAAM,EAElB,KAAM,CAAE,OAAQW,CAAU,EAAKnB,EAC5B,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKmB,EAAa,EAClB,SAAU,QACd,CAAG,CACH,EAEAlB,EAAW,iBAAiB,SAAUa,CAAY,EAClDZ,EAAY,iBAAiB,QAASgB,CAAc"}